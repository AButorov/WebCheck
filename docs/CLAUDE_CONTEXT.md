# Web Check - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è Claude AI

<project_info>
**Web Check** - Chrome —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Vue 3 + TypeScript + Manifest V3 + Offscreen API
**–§–∞–∑–∞**: –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (95% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)
</project_info>

## üìã –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[CLAUDE.md](CLAUDE.md)** - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ (–ß–ò–¢–ê–ô –ü–ï–†–í–´–ú)
- **[PROJECT_STATUS.md](PROJECT_STATUS.md)** - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **[BUILD_PROCESS.md](BUILD_PROCESS.md)** - –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ–π

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[ARCHITECTURE.md](ARCHITECTURE.md)** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **[TECH_STACK.md](TECH_STACK.md)** - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **[API.md](API.md)** - –û–ø–∏—Å–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API

### üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **[DEVELOPMENT.md](DEVELOPMENT.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **[KNOWN_ISSUES.md](KNOWN_ISSUES.md)** - –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –±–∞–≥–∏
- **[TESTING.md](TESTING.md)** - –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üöÄ –ü—É–±–ª–∏–∫–∞—Ü–∏—è
- **[DEPLOYMENT.md](DEPLOYMENT.md)** - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Chrome Web Store

## üî• –¢–µ–∫—É—â–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

<priority_tasks>
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–∞—Ö —Å–∞–π—Ç–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
   
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
   
3. **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã popup –∏ options —Å—Ç—Ä–∞–Ω–∏—Ü
   - –í–∞–ª–∏–¥–∞—Ü–∏—è i18n (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
   
4. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–ª–∏–∑—É**
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è Chrome Web Store
</priority_tasks>

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
Web Check Extension
‚îú‚îÄ‚îÄ Background Service Worker
‚îÇ   ‚îú‚îÄ‚îÄ OffscreenManager (Singleton) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ TaskQueue - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ ReliabilityManager - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ Monitor System - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–∞–π—Ç–∞—Ö
‚îú‚îÄ‚îÄ Content Scripts - –ò–Ω–∂–µ–∫—Ü–∏—è –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ Offscreen Documents - –ù–µ–≤–∏–¥–∏–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
‚îú‚îÄ‚îÄ Popup UI (Vue 3) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
‚îî‚îÄ‚îÄ Options UI (Vue 3) - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
```

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è Claude

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Offscreen API
```typescript
// –¢–û–õ–¨–ö–û 1 offscreen –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –≤—Å—ë —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ!
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Singleton –ø–∞—Ç—Ç–µ—Ä–Ω + –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
```

### CSP Manifest V3
```javascript
// –ó–∞–ø—Ä–µ—â–µ–Ω—ã: eval(), new Function(), inline scripts
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è Vue, —Å—Ç—Ä–æ–≥–∏–π CSP
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è Chrome
```typescript
// –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û return true –¥–ª—è async handlers
chrome.runtime.onMessage.addListener((msg, sender, sendResponse) => {
  handleAsync(msg).then(sendResponse);
  return true; // –ö–†–ò–¢–ò–ß–ù–û!
});
```

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-----------|--------|------------|
| üîß Background Service Worker | ‚úÖ –ì–æ—Ç–æ–≤ | –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã |
| üñ•Ô∏è Offscreen Manager | ‚úÖ –ì–æ—Ç–æ–≤ | Singleton + —Å–µ–º–∞—Ñ–æ—Ä |
| üìã Task Queue System | ‚úÖ –ì–æ—Ç–æ–≤ | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| üõ°Ô∏è Reliability Manager | ‚úÖ –ì–æ—Ç–æ–≤ | –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ |
| üé® Popup UI | ‚úÖ –ì–æ—Ç–æ–≤ | Vue 3 + CSP —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| ‚öôÔ∏è Options UI | ‚úÖ –ì–æ—Ç–æ–≤ | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ + i18n |
| üìù Content Scripts | ‚úÖ –ì–æ—Ç–æ–≤ | Legacy JS –±–µ–∑ ES modules |
| üèóÔ∏è Build System | ‚úÖ –ì–æ—Ç–æ–≤ | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π build.sh |

## üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥ —Å–±–æ—Ä–∫–∏**: `cat build.log`
2. **Service Worker –∫–æ–Ω—Å–æ–ª—å**: DevTools ‚Üí Application ‚Üí Service Workers
3. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: `./quick_critical_fix.sh`
4. **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞**: `./build.sh clean`

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **"undefined task.id"** ‚Üí –ü—Ä–æ–≤–µ—Ä—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `taskQueue.ts`
- **"Message channel closed"** ‚Üí –ü—Ä–æ–≤–µ—Ä—å `return true` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
- **"–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç iframe"** ‚Üí –ü—Ä–æ–≤–µ—Ä—å Singleton –≤ `offscreenManager.ts`

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

- **README.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **FINAL_SUMMARY.md** - –°–≤–æ–¥–∫–∞ —Ä–µ—à—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- **ARCHITECTURE_SOLUTION.md** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- **BUILD_GUIDE.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –≥–∏–¥ –ø–æ —Å–±–æ—Ä–∫–µ
- **RELIABILITY_TESTING.md** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏

---

<workflow_note>
**Workflow –¥–ª—è Claude:**
1. –í—Å–µ–≥–¥–∞ —á–∏—Ç–∞–π CLAUDE.md –ø–µ—Ä–≤—ã–º
2. –ü—Ä–æ–≤–µ—Ä—è–π PROJECT_STATUS.md –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
3. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–º–æ—Ç—Ä–∏ KNOWN_ISSUES.md
4. –î–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Üí ARCHITECTURE.md
5. –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ ‚Üí ./backup.sh
6. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Üí ./build.sh
</workflow_note>