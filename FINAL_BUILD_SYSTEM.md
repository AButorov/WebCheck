# ‚úÖ –£–°–ü–ï–®–ù–û –ú–û–î–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–ô build.sh

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### üî• –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –æ–¥–∏–Ω**: `build.sh`
   - –£–¥–∞–ª–µ–Ω—ã: `build-fixed.sh`, `fix-modules.sh`, `vite.config.fixed.ts`, `src/manifest.fixed.ts`
   - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –µ–¥–∏–Ω—ã–π `build.sh`

2. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ES –º–æ–¥—É–ª–µ–π**:
   - –§—É–Ω–∫—Ü–∏—è `fix_module_issues()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã
   - –§—É–Ω–∫—Ü–∏—è `validate_build()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ background script —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

3. **–†–∞—Å—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
   - –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

## –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
1. Content script –±–µ–∑ ES modules: ‚úÖ OK - –±–µ–∑ import statements
2. Manifest —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º: ‚úÖ OK - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å  
3. Background script –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: ‚úÖ OK - –æ–±—ä–µ–¥–∏–Ω–µ–Ω –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
4. –í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ: ‚úÖ OK - –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
```

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```
dist/
‚îú‚îÄ‚îÄ manifest.json ‚úÖ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ content script)
‚îú‚îÄ‚îÄ service-worker-loader.js ‚úÖ
‚îú‚îÄ‚îÄ content-script/
‚îÇ   ‚îî‚îÄ‚îÄ index-legacy.js ‚úÖ (–±–µ–∑ ES –º–æ–¥—É–ª–µ–π)
‚îú‚îÄ‚îÄ offscreen/ ‚úÖ (HTML + JS –¥–ª—è offscreen API)
‚îú‚îÄ‚îÄ icons/ ‚úÖ (–≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã)
‚îú‚îÄ‚îÄ assets/js/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts.js ‚úÖ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
‚îî‚îÄ‚îÄ src/ui/ ‚úÖ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤:

```bash
# –û–±—ã—á–Ω–∞—è —Å–±–æ—Ä–∫–∞
./build.sh

# –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
./build.sh dev

# –° –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∫–æ–Ω–æ–∫
./build.sh icons

# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è —Å–±–æ—Ä–∫–∞
./build.sh debug
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### üéØ –ü—Ä–æ—Å—Ç–æ—Ç–∞:
- **–û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞** - –æ—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –ø—Ä–æ–±–ª–µ–º —Å ES –º–æ–¥—É–ª—è–º–∏
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö** —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

### üöÄ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- **–¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥** - –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- **–ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –ø—Ä–æ–±–ª–µ–º

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå "Cannot use import statement outside a module"
**‚úÖ –†–ï–®–ï–ù–û**: Background script –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, content script –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–π JavaScript

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ manifest.json
**‚úÖ –†–ï–®–ï–ù–û**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø—É—Ç–µ–π –∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º

### ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
**‚úÖ –†–ï–®–ï–ù–û**: –ï–¥–∏–Ω—ã–π point of entry –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á —Å–±–æ—Ä–∫–∏

## –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `./build.sh`:

```
1. chrome://extensions/
2. –í–∫–ª—é—á–∏—Ç—å "–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
3. "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ"
4. –í—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É dist/

‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫!
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –µ–¥–∏–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏**, –∫–æ—Ç–æ—Ä—ã–π:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç** –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å ES –º–æ–¥—É–ª—è–º–∏
- ‚úÖ **–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ  
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏** –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

**–ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å "import statement outside a module"!** üöÄ
