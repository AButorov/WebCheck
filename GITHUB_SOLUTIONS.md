# –†–µ—à–µ–Ω–∏—è –∏–∑ GitHub –¥–ª—è –ø—Ä–æ–±–ª–µ–º WebCheck

## üîç –ê–Ω–∞–ª–∏–∑ –ø–æ—Ö–æ–∂–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:

1. **mubaidr/vite-vue3-browser-extension-v3** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π starter —Å Vue 3, TypeScript, Manifest V3 –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π offscreen
2. **xiaoluoboding/chrome-ext-starter** - Manifest V3 Vite Starter Template
3. –û–±—Å—É–∂–¥–µ–Ω–∏—è –≤ w3c/webextensions –∏ Chrome Developer —Ñ–æ—Ä—É–º–∞—Ö

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. TypeError: Cannot read properties of undefined (reading 'id')

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–æ–±—ã—Ç–∏–π.

**–†–µ—à–µ–Ω–∏–µ –∏–∑ GitHub –ø—Ä–æ–µ–∫—Ç–æ–≤**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
// –ü—Ä–∏–º–µ—Ä –∏–∑ mubaidr/vite-vue3-browser-extension-v3
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  // –ó–∞—â–∏—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  if (!message || typeof message !== 'object' || !message.type) {
    sendResponse({ error: 'Invalid message format' })
    return false
  }
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
  const handler = handlers[message.type]
  if (!handler) {
    sendResponse({ error: 'Unknown message type' })
    return false
  }
  
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  handler(message.data, sender)
    .then(sendResponse)
    .catch(error => sendResponse({ error: error.message }))
  
  return true // –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
})
```

### 2. –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Offscreen API

**–ü—Ä–æ–±–ª–µ–º–∞**: Offscreen –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç.

**–†–µ—à–µ–Ω–∏–µ –∏–∑ Chrome Developer –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**:
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ retry –ª–æ–≥–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

```javascript
// –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
const OFFSCREEN_CONFIG = {
  IFRAME_LOAD_TIMEOUT: 60000, // 60 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 30
  CONTENT_EXTRACTION_TIMEOUT: 45000, // 45 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 25
  PAGE_LOAD_DELAY: 5000, // 5 —Å–µ–∫—É–Ω–¥ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
  MAX_RETRY_ATTEMPTS: 3 // 3 –ø–æ–ø—ã—Ç–∫–∏ –≤–º–µ—Å—Ç–æ 2
}
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–º–µ–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (undefined responses)

**–ü—Ä–æ–±–ª–µ–º–∞**: chrome.runtime.sendMessage –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç undefined.

**–†–µ—à–µ–Ω–∏–µ –∏–∑ webext-bridge (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–ø–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö)**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–∏—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π API
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ return true –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 4. Google Drive API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞**: google_drive_search is not defined.

**–†–µ—à–µ–Ω–∏–µ**: –ú–Ω–æ–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö API —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

## üì¶ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ —Ç–æ–ø–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

1. **webext-bridge** - –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
2. **webextension-polyfill** - –¥–ª—è –∫—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. **@crxjs/vite-plugin** - –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

## üõ†Ô∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:
```bash
chmod +x apply_github_solutions.sh
./apply_github_solutions.sh
```

2. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**:
```bash
./build.sh
```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ Service Worker
chrome.runtime.sendMessage({type: 'get-monitoring-stats'})
  .then(console.log)
  .catch(console.error)

chrome.runtime.sendMessage({type: 'get-performance-stats'})
  .then(console.log)
  .catch(console.error)
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Chrome Extensions Manifest V3 Documentation](https://developer.chrome.com/docs/extensions/develop/migrate)
- [Offscreen Documents API](https://developer.chrome.com/docs/extensions/reference/api/offscreen)
- [w3c/webextensions discussions](https://github.com/w3c/webextensions/issues)

## üìà Best Practices –∏–∑ —Ç–æ–ø–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏
2. **–£–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript** –¥–ª—è type-safety
6. **–†–∞–∑–¥–µ–ª—è–π—Ç–µ –ª–æ–≥–∏–∫—É** –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ –º–æ–¥—É–ª–∏

## ‚ö° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞:
- **@crxjs/vite-plugin** –¥–ª—è –ª—É—á—à–µ–≥–æ DX
- **webext-bridge** –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è messaging
- **Pinia** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
