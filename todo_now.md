# –ü–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ WebCheck –Ω–∞ Offscreen Documents API (Manifest V3) - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

**–¶–µ–ª—å**: –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–∏–¥–∏–º—ã—Ö –≤–∫–ª–∞–¥–æ–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –ø—Ä–æ—Ü–µ—Å—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞–ª –Ω–µ–≤–∏–¥–∏–º—ã–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–°–¢–ê–¢–£–°: –í–°–ï –≠–¢–ê–ü–´ –ó–ê–í–ï–†–®–ï–ù–´** üéâ

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–û–±–Ω–æ–≤–∏—Ç—å `manifest.json`**:
  - [x] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `"offscreen"` –≤ –º–∞—Å—Å–∏–≤ `permissions`.
- [x] **–°–æ–∑–¥–∞—Ç—å HTML-—Ñ–∞–π–ª –¥–ª—è offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞**:
  - [x] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/offscreen/offscreen.html`.
  - [x] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ –Ω–µ–º —Å–∫—Ä–∏–ø—Ç `src/offscreen/offscreen.js`.
- [x] **–°–æ–∑–¥–∞—Ç—å JavaScript-—Ñ–∞–π–ª –¥–ª—è offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞**:
  - [x] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/offscreen/offscreen.js`.
- [x] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–±–æ—Ä–∫—É**:
  - [x] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `offscreen.html` –∏ `offscreen.js` –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `dist/offscreen/` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ (–æ–±–Ω–æ–≤–∏—Ç—å `vite.config.js` –∏–ª–∏ –≤–∞—à —Å–∫—Ä–∏–ø—Ç `build.sh`).

## 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞ - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Service Worker** (–≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ `src/background/offscreenManager.js` –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É):
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `hasOffscreenDocument(path)` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É—è `chrome.runtime.getContexts()`).
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `ensureOffscreenDocument(path)`:
    - [x] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é `hasOffscreenDocument`.
    - [x] –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç –µ–≥–æ —Å –ø–æ–º–æ—â—å—é `chrome.offscreen.createDocument()`.
    - [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é `reason` –∏–∑ `chrome.offscreen.Reason` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `USER_INPUT`, —Ç–∞–∫ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–ª–∏ –¥—Ä—É–≥–∞—è, –Ω–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—â–∞—è —Å—Ç—Ä–æ–≥–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π).
    - [x] –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `justification` –¥–ª—è `createDocument`.
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–º–∏—Å–∞ `creatingPromise`).

## 3. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`src/background/monitor/`) - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `ensureOffscreenDocument` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**:
  - [x] –í—ã–∑—ã–≤–∞—Ç—å `ensureOffscreenDocument()` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ URL, —Ç—Ä–µ–±—É—é—â–µ–π DOM-–¥–æ—Å—Ç—É–ø–∞.
- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É Service Worker –∏ `offscreen.js`**:
  - [x] **Service Worker (–ª–æ–≥–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)**:
    - [x] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `getContentViaOffscreen(url, selector)`) –∫–æ—Ç–æ—Ä–∞—è:
      - [x] –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `offscreen.js` —Å `url` –∏ `selector` (–∏—Å–ø–æ–ª—å–∑—É—è `chrome.runtime.sendMessage`). –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä `target: 'offscreen'` –∏ `type` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `PROCESS_URL`).
      - [x] –û–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç `offscreen.js` (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise).
      - [x] –í–Ω–µ–¥—Ä–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞.
      - [x] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å `chrome.runtime.lastError` –∏ –æ—à–∏–±–∫–∏, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –∏–∑ `offscreen.js`.
  - [x] **`src/offscreen/offscreen.js`**:
    - [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å `chrome.runtime.onMessage.addListener` –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Service Worker.
    - [x] –ü—Ä–æ–≤–µ—Ä—è—Ç—å `message.target === 'offscreen'` –∏ `message.type`.
- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ `offscreen.js`**:
  - [x] **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `<iframe>`**:
    - [x] –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å `<iframe>`.
    - [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `src` –¥–ª—è `<iframe>` –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `url`.
    - [x] –°–¥–µ–ª–∞—Ç—å iframe –Ω–µ–≤–∏–¥–∏–º—ã–º.
    - [x] –î–æ–±–∞–≤–∏—Ç—å `<iframe>` –≤ DOM `offscreen.html`.
    - [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `iframe.onload` –∏ `iframe.onerror`.
    - [x] –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª—è—Ç—å `<iframe>` –∏–∑ DOM –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∏–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ.
  - [x] **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ `<iframe>`**:
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä—è–º–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `iframe.contentDocument`
    - [x] –î–æ–±–∞–≤–ª–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ postMessage –¥–ª—è CORS-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    - [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∂–µ–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤ iframe –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ postMessage
    - [x] –û–±–Ω–æ–≤–ª–µ–Ω `manifest.json` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `"all_frames": true`
  - [x] **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–∑ `offscreen.js` –æ–±—Ä–∞—Ç–Ω–æ –≤ Service Worker**:
    - [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `sendResponse()` –∏–∑ —Å–ª—É—à–∞—Ç–µ–ª—è `onMessage` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ) –æ–±—Ä–∞—Ç–Ω–æ –≤ Service Worker.
    - [x] –ù–µ –∑–∞–±—ã—Ç—å –≤–µ—Ä–Ω—É—Ç—å `true` –∏–∑ —Å–ª—É—à–∞—Ç–µ–ª—è `onMessage` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ `sendResponse`.

## 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –≤ Service Worker**:
  - [x] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/background/taskQueue.ts` —Å –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –æ—á–µ—Ä–µ–¥–µ–π
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ offscreen API
  - [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] **–£—Å–∏–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤**:
  - [x] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/background/reliabilityManager.ts` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–¥–æ—Ä–æ–≤—å—è
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
  - [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `withReliability()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] **–ü—Ä–æ–¥—É–º–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∑–∞–∫—Ä—ã—Ç–∏—è offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞**:
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–∏
  - [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏

## 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–ü—Ä–æ–≤–µ—Å—Ç–∏ –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–∞—Ö –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü**:
  - [x] –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã.
  - [x] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (SPA), —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º JavaScript-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º).
  - [x] –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ Content Security Policy (CSP).
  - [x] –°—Ç—Ä–∞–Ω–∏—Ü—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–¥—É–º–∞—Ç—å, –∫–∞–∫ –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è cookie –∏ —Å–µ—Å—Å–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `<iframe>` –≤–Ω—É—Ç—Ä–∏ offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞).
- [x] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫**:
  - [x] –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ URL –≤ `<iframe>`.
  - [x] –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
  - [x] –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤.
  - [x] –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º.
- [x] **–ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Chrome**:
  - [x] –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ Service Worker (–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `chrome://extensions/` -> –≤–∞—à–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ -> "Service worker").
  - [x] –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ `offscreen.js` (–ª–æ–≥–∏ –º–æ–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å Service Worker, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è).
  - [x] –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ Content Script, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤–Ω—É—Ç—Ä–∏ `<iframe>` (—á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–µ–π–º–∞, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ).

## 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

- [x] **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ**, —á—Ç–æ–±—ã –æ—Ç—Ä–∞–∑–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
- [x] **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞** –≤ `src/background/monitor/` –¥–ª—è —á–∏—Å—Ç–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- [x] **–û–±–Ω–æ–≤–∏—Ç—å `README.md`** (–∏ –¥—Ä—É–≥–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã) –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- [x] **–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**: –§–∞–π–ª `RELIABILITY_TESTING.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏.

---

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

**–í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!** 

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

1. **100% –Ω–µ–≤–∏–¥–∏–º—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ–ª—å—à–µ –Ω–µ –≤–∏–¥—è—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
2. **–í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**: –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
4. **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- `src/background/taskQueue.ts` - –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π
- `src/background/reliabilityManager.ts` - –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏  
- `src/offscreen/offscreen.html` - HTML –¥–ª—è offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞
- `src/offscreen/offscreen.js` - –õ–æ–≥–∏–∫–∞ offscreen-–¥–æ–∫—É–º–µ–Ω—Ç–∞
- `RELIABILITY_TESTING.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:
**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–µ–ª–∏–∑—É!** üöÄ

–í—Å—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Offscreen Documents API –∏ –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é.
