## Исправление ошибок и обновления
- Исправлена ошибка при сборке с `vue-tsc` и `typescript`
- Обновлены версии компонентов для обеспечения совместимости
- Изменен процесс сборки: теперь проверка типов опциональна и не блокирует сборку
- Добавлен отдельный скрипт `type-check` для проверки типов
- Исправлена ошибка Content Security Policy с использованием `unsafe-eval`
- Добавлены CSP-безопасные настройки для Vue и i18n
- Реализована утилита для безопасной работы с `browser.storage`
- Исправлены все ошибки TypeScript для успешной проверки типов
- Добавлены полные типы для всех сообщений между компонентами расширения
- Реализован собственный тип `JsonValue` для совместимости с API расширения
- Улучшена стабильность работы расширения в браузере Chrome
- Реализована поддержка строгой политики CSP в Manifest V3 (без unsafe-eval)

# Web Check - расширение для отслеживания изменений на сайтах

## Статус разработки
- [x] Создана базовая структура проекта на основе vite-vue3-browser-extension-v3
- [x] Настроены основные конфигурационные файлы (package.json, vite.config.ts, tsconfig.json)
- [x] Настроен Tailwind CSS согласно требованиям ТЗ
- [x] Созданы файлы локализации (en, ru)
- [x] Создан интерфейс управления задачами согласно ТЗ
- [x] Реализовано хранилище задач с использованием Pinia
- [x] Созданы базовые скрипты (background, content-script)
- [x] Реализован базовый механизм проверки изменений (нуждается в доработке)
- [x] Реализовано отображение изменений в формате "было/стало"
- [x] Созданы утилитарные скрипты: build.sh, backup.sh, clear.sh
- [x] Создана страница настроек расширения
- [x] Реализована базовая конфигурация ESLint
- [x] Созданы базовые иконки расширения
- [x] Добавлен демо-режим для демонстрации интерфейса
- [x] Улучшено отображение оставшегося времени до следующей проверки
- [x] Добавлены индикаторы загрузки и обработка ошибок
- [x] Реализовано безопасное хранение данных в Chrome Storage API
- [x] Улучшен интерфейс управления задачами согласно ТЗ
- [x] Обновлен компонент TaskCard с улучшенным дизайном
- [x] Улучшена страница просмотра изменений
- [x] Добавлена локализация для всех элементов интерфейса
- [x] Добавлены анимации и улучшены переходы между состояниями UI
- [x] Добавлены стили для улучшения доступности интерфейса
- [x] Реализована система динамического отображения времени до следующей проверки
- [x] Добавлены утилиты для отладки и диагностики расширения
- [x] Исправлены пути в manifest.ts для корректной загрузки popup
- [x] Добавлено расширенное логирование для отладки проблем
- [x] Реализована поддержка строгих CSP ограничений Manifest V3
- [x] Добавлены скрипты для удобной разработки и переключения между режимами

## Последние обновления (12.05.2025)
- Реализована полная поддержка строгой политики CSP в Manifest V3 (без unsafe-eval)
- Адаптирован Vue.js для работы без использования eval()
- Обновлен скрипт сборки mv3-build.sh для создания CSP-совместимой сборки
- Создан удобный инструмент разработчика devtools.sh для переключения между режимами
- Обновлены файлы конфигурации для обеспечения совместимости с CSP
- Улучшена обработка ошибок и логирование для отладки

## Особенности работы с Manifest V3

С выходом Manifest V3 для расширений Chrome были введены строгие ограничения CSP, запрещающие использование `unsafe-eval`. Это создает определенные проблемы при работе с фреймворками, такими как Vue.js, которые обычно используют eval() для компиляции шаблонов.

В проекте реализованы два режима работы:
1. **Режим разработки** - использует более свободные настройки для удобной разработки
2. **MV3 CSP-совместимый режим** - строго соблюдает CSP-ограничения Manifest V3

Для переключения между режимами используйте скрипт `devtools.sh`.

## Текущие возможности
- Просмотр списка задач отслеживания
- Изменение статуса задач (активно/приостановлено)
- Изменение интервала проверки задач
- Просмотр изменений в режиме сравнения "было/стало"
- Удаление задач
- Поддержка различных языков (en, ru)
- Отображение оставшегося времени до следующей проверки
- Различные визуальные состояния задач (изменения обнаружены, без изменений, приостановлено)
- Демо-режим для демонстрации интерфейса
- Улучшенный интерфейс в соответствии с ТЗ
- Отзывчивый дизайн с плавными анимациями переходов
- Индикаторы загрузки и обработка ошибок
- Удобная навигация между экранами
- Стилизация элементов интерфейса по требованиям ТЗ (цвета, шрифты, визуальное оформление)
- Расширенные инструменты для отладки и диагностики проблем

## Инструкции по сборке и установке

Для упрощения работы создан скрипт devtools.sh, который объединяет все команды в одном интерфейсе:

```bash
chmod +x devtools.sh
./devtools.sh
```

### Варианты сборки:
1. **Запуск режима разработки**:
   ```bash
   pnpm run dev
   ```

2. **Создание отладочной сборки**:
   ```bash
   chmod +x debug.sh
   ./debug.sh
   ```

3. **Создание CSP-совместимой MV3 сборки**:
   ```bash
   chmod +x mv3-build.sh
   ./mv3-build.sh
   ```

4. **Создание production сборки**:
   ```bash
   chmod +x build.sh
   ./build.sh
   ```

5. **Запуск диагностики**:
   ```bash
   chmod +x diagnose.sh
   ./diagnose.sh
   ```

### После сборки:
1. Откройте chrome://extensions/
2. Включите режим разработчика
3. Нажмите "Загрузить распакованное расширение" и выберите папку dist
4. Для отладки откройте инструменты разработчика в окне расширения

## Следующие шаги разработки
- Реализовать полноценную функциональность выбора элементов на странице
- Добавить функциональность создания новых задач отслеживания
- Реализовать полноценную логику проверки изменений в фоновом режиме
- Доработать систему уведомлений
- Добавить настройки расширения
- Расширить список поддерживаемых языков
- Добавить интеграционные и юнит-тесты

## Требования
- Node.js 20.x LTS
- pnpm (рекомендуется для управления зависимостями)
- Google Chrome или браузер на основе Chromium

## Другие скрипты

### Создание резервной копии
```bash
./backup.sh
```

### Очистка временных файлов
```bash
./clear.sh
```
